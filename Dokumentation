PortaFontium Downloader ‚Äì Dokumentation
1. √úberblick
Zweck:
Der PortaFontium Downloader erm√∂glicht das Herunterladen von B√ºchern von der Webseite Porta Fontium. Das Programm bietet eine grafische Benutzeroberfl√§che (GUI) f√ºr das Hinzuf√ºgen, L√∂schen und Verwalten von B√ºchern sowie f√ºr das Starten und Stoppen von Downloads.
Hauptmerkmale:
‚Ä¢	Mehrsprachige GUI: Deutsch, Englisch, Tschechisch.
‚Ä¢	Mehrfachauswahl in der Warteliste m√∂glich.
‚Ä¢	Fortschrittsanzeige pro Buch und f√ºr alle Downloads.
‚Ä¢	Anpassbare Seitenauswahl pro Buch.
‚Ä¢	Log-Fenster f√ºr Statusmeldungen.
‚Ä¢	Direktzugriff auf die Porta Fontium Hauptseite.
‚Ä¢	Farbig gestaltete, intuitive Buttons.
Technologien:
‚Ä¢	Python 3
‚Ä¢	tkinter f√ºr GUI
‚Ä¢	requests f√ºr HTTP-Anfragen
‚Ä¢	BeautifulSoup f√ºr HTML Parsing
________________________________________
2. Struktur des Programms
2.1 Globale Konstanten
‚Ä¢	DEFAULT_HEADERS: HTTP Header f√ºr die Requests, um die Webseite korrekt anzusprechen.
‚Ä¢	FONT_DEFAULT: Standardfont f√ºr die GUI.
‚Ä¢	LANG: Dictionary f√ºr mehrsprachige Texte (Deutsch, Englisch, Tschechisch).
Beispiel f√ºr Spracheintr√§ge:
"de": {
    "title": "üìö PortaFontium Downloader",
    "add_book": "‚ûï Buch hinzuf√ºgen",
    "delete_book": "üóëÔ∏è Buch l√∂schen",
    ...
}
________________________________________
2.2 Hilfsfunktionen
1.	fetch_html(url, session)
L√§dt die HTML-Seite einer Buch-URL herunter und gibt den HTML-Code zur√ºck.
2.	find_iip_links(html, base_url)
Extrahiert alle Bildlinks (Seitenbilder) aus der HTML-Seite des Buches.
3.	build_download_url(iip_url)
Baut eine direkt nutzbare JPEG-Download-URL aus einem IIP-Image-Server-Link.
4.	download_image(url, path, session, retries=3)
L√§dt ein Bild herunter und speichert es am angegebenen Pfad. Bei Fehlern wird der Download bis zu 3-mal wiederholt.
________________________________________
2.3 Klasse Downloader
Verantwortung:
Download-Logik f√ºr alle B√ºcher in der Warteliste.
Attribute:
‚Ä¢	books: Liste der B√ºcher (Dictionary mit URL, Zielordner, Seitenangaben).
‚Ä¢	log: Callback f√ºr Logmeldungen.
‚Ä¢	progress_update: Callback f√ºr Fortschrittsanzeigen.
‚Ä¢	stop_flag: Lambda f√ºr Abbruchbedingung.
‚Ä¢	session: Requests-Session mit Headers.
Methoden:
‚Ä¢	parse_pages(pages_str, total): Wandelt eine Seitenangabe (z.B. "1,5,8-10") in eine Liste von Zahlen um.
‚Ä¢	run(): F√ºhrt den Download f√ºr alle B√ºcher aus, aktualisiert Logs und Fortschritt.
________________________________________
2.4 Klasse DownloaderGUI
Verantwortung:
GUI-Logik, Anzeige, Benutzerinteraktion.
Wichtige GUI-Elemente:
‚Ä¢	Home Button: √ñffnet die Porta Fontium Hauptseite.
‚Ä¢	Eingabefelder: Buch-URL, Zielordner, Seiten.
‚Ä¢	Buttons rechts vom Zielordner: Buch hinzuf√ºgen, Buch l√∂schen, Seiten √§ndern.
‚Ä¢	Download & Stop Buttons: Starten oder Stoppen des Downloadprozesses.
‚Ä¢	Sprache & Log: Auswahl der Sprache und √ñffnen/Schlie√üen des Log-Fensters.
‚Ä¢	Warteliste: Listbox f√ºr die B√ºcher, unterst√ºtzt Mehrfachauswahl.
‚Ä¢	Fortschrittsbalken: Zeigt prozentualen Fortschritt aller Downloads.
‚Ä¢	Log-Fenster: Zeigt Statusmeldungen, kann ge√∂ffnet oder geschlossen bleiben.
Wichtige Methoden:
‚Ä¢	open_home(): √ñffnet die Hauptseite im Webbrowser.
‚Ä¢	choose_dir(): √ñffnet einen Dialog zum Ausw√§hlen des Zielordners.
‚Ä¢	toggle_log(): √ñffnet oder schlie√üt das Log-Fenster.
‚Ä¢	log(msg): Schreibt eine Meldung in das Log-Fenster.
‚Ä¢	add_book(): F√ºgt ein Buch zur Warteliste hinzu.
‚Ä¢	delete_book(): L√∂scht alle ausgew√§hlten B√ºcher aus der Warteliste.
‚Ä¢	change_pages(): √Ñndert die Seitenangaben eines ausgew√§hlten Buches.
‚Ä¢	start_books(): Startet den Downloadprozess (setzt Fortschrittsbalken auf 0).
‚Ä¢	stop_download(): Stoppt laufende Downloads.
‚Ä¢	update_progress(idx, value): Aktualisiert Fortschrittsbalken und Buchstatus.
‚Ä¢	run_books_thread(): F√ºhrt den Downloader in einem separaten Thread aus.
‚Ä¢	change_language(): Aktualisiert alle Labels und Buttons entsprechend der ausgew√§hlten Sprache.
________________________________________
2.5 Besonderheiten
‚Ä¢	Mehrfachauswahl in Listbox: Benutzer kann mehrere B√ºcher ausw√§hlen, um sie gleichzeitig zu l√∂schen.
‚Ä¢	Farbliche Buttons: Erh√∂ht die √úbersichtlichkeit und Benutzerfreundlichkeit.
‚Ä¢	Log-Fenster: Immer manuell steuerbar, unabh√§ngig von Logmeldungen.
‚Ä¢	Prozentualer Fortschrittsbalken: Zeigt Gesamtfortschritt basierend auf abgeschlossenen Downloads an.
________________________________________
3. Nutzungshinweise
1.	B√ºcher hinzuf√ºgen:
o	Buch-URL, Zielordner und ggf. Seiten angeben.
o	Button ‚ÄûBuch hinzuf√ºgen‚Äú klicken.
2.	B√ºcher l√∂schen:
o	B√ºcher in der Warteliste ausw√§hlen (Mehrfachauswahl m√∂glich).
o	Button ‚ÄûBuch l√∂schen‚Äú klicken oder Entf dr√ºcken.
3.	Seiten √§ndern:
o	Buch ausw√§hlen und Button ‚ÄûSeiten √§ndern‚Äú klicken.
4.	Download starten:
o	Button ‚ÄûHerunterladen‚Äú klicken.
o	Fortschrittsbalken zeigt den Gesamtfortschritt.
5.	Download stoppen:
o	Button ‚ÄûStopp‚Äú klicken.
6.	Log-Fenster:
o	√úber den Button ‚ÄûLog √∂ffnen/Log schlie√üen‚Äú sichtbar machen.
7.	Sprache √§ndern:
o	Auswahlmen√º oben rechts verwenden, alle Texte passen sich automatisch an.
